<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nave Beat Apurado ğŸ‘½ğŸš€</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Audiowide&display=swap');

body {
  margin: 0;
  font-family: 'Audiowide', cursive;
  background: url('https://raw.githubusercontent.com/beatapurado/radiobeatapurado/main/uni.png') no-repeat center center fixed;
  background-size: cover;
  color: #cfcff5;
}

/* HEADER */
header {
  text-align: center;
  padding: 40px 15px;
  background: rgba(0, 0, 0, 0.85);
}
h1 {
  font-size: 3.5rem;
  text-transform: uppercase;
  color: #39ff14;
  text-shadow: 0 0 20px #39ff14, 0 0 40px #ff00de;
  margin: 0;
}

/* NAVBAR */
nav {
  display: flex;
  justify-content: center;
  gap: 25px;
  padding: 15px;
  background: rgba(0, 0, 0, 0.9);
}
nav a {
  color: #39ff14;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
}
nav a:hover {
  color: #cfcff5;
  text-shadow: 0 0 10px #cfcff5;
}

/* CONTAINER */
.container {
  max-width: 1200px;
  margin: auto;
  padding: 20px;
  display: grid;
  gap: 25px;
}
section {
  background: rgba(10, 10, 20, 0.9);
  padding: 25px;
  border-radius: 18px;
  box-shadow: 0 0 25px rgba(255, 0, 200, 0.4);
}

/* PLAYER */
.player-box {
  text-align: center;
}
.online-counter {
  font-size: 1.4rem;
  margin-bottom: 15px;
  color: #39ff14;
  text-shadow: 0 0 15px #39ff14;
}
.status {
  font-size: 1rem;
  margin-top: 5px;
  color: #ff00de;
  text-shadow: 0 0 10px #ff00de;
}
#playBtn {
  background-color: #2ecc71;
  border: none;
  color: white;
  padding: 15px 40px;
  font-size: 20px;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.3s, transform 0.2s;
  box-shadow: 0 0 20px #39ff14;
}
#playBtn:hover {
  background-color: #27ae60;
  transform: scale(1.05);
}

/* VISUALIZADOR DE ÃUDIO */
#visualizer {
  width: 100%;
  height: 120px;
  background: transparent;
  display: block;
  margin-top: 25px;
}

/* PROGRAMAÃ‡ÃƒO */
.programacao {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}
.programacao .card {
  background: rgba(255, 255, 255, 0.05);
  padding: 15px;
  border-radius: 12px;
  text-align: center;
  color: #cfcff5;
  box-shadow: inset 0 0 15px rgba(57, 255, 20, 0.5);
}

/* CHAT */
.chat-frame {
  width: 100%;
  height: 400px;
  border: none;
  border-radius: 10px;
  background: #050505;
  box-shadow: 0 0 15px #ff00de;
}

/* FLYER */
.flyer {
  text-align: center;
}
.flyer img {
  max-width: 100%;
  border-radius: 15px;
  box-shadow: 0 0 25px rgba(57, 255, 20, 0.6);
}

/* FOOTER */
footer {
  text-align: center;
  padding: 20px;
  font-size: 0.9rem;
  background: rgba(0, 0, 0, 0.95);
  margin-top: 30px;
  color: #666;
}
</style>
</head>

<body>

<header>
  <h1>ğŸ‘½ Nave Beat Apurado ğŸš€</h1>
  <p>Sons do underground direto do espaÃ§o sideral</p>
</header>

<nav>
  <a href="#player">Ao Vivo</a>
  <a href="#programacao">ProgramaÃ§Ã£o</a>
  <a href="#produtos">Produtos</a>
  <a href="#chat">Chat</a>
</nav>

<div class="container">

  <!-- PLAYER -->
  <section id="player" class="player-box">
    <h2>â–¶ï¸ Ao Vivo</h2>
    <div class="online-counter">
      ğŸŒ TerrÃ¡queos online: <span id="online">0</span><br>
      ğŸš€ Visitas totais: <span id="visitas">0</span>
    </div>

    <!-- Player HTML5 funcional -->
    <audio id="beat-player" controls autoplay>
      <source src="https://uk25freenew.listen2myradio.com/live.mp3?typeportmount=s1_30119_stream_570097994" type="audio/mpeg">
      Seu navegador nÃ£o suporta o player de Ã¡udio.
    </audio>

    <p style="font-size:0.9rem;color:#ccc;margin-top:10px;">


      ğŸ”Š Se o som nÃ£o iniciar automaticamente, clique em â€œPlayâ€.
    </p>
  </section>

  <!-- FLYER -->
  <section class="flyer">
    <h2>ğŸ“¡ Flyer da Semana</h2>
    <img src="https://raw.githubusercontent.com/beatapurado/radiobeatapurado/main/rbu_flyer_01_.jpg" alt="Flyer Beat Apurado">
  </section>

  <!-- PROGRAMAÃ‡ÃƒO -->
  <section id="programacao">
    <h2>ğŸ“… ProgramaÃ§Ã£o da Semana</h2>
    <div class="programacao">
      <div class="card">ğŸ§ Segunda â€“ SessÃ£o Underground (20h - 22h)</div>
      <div class="card">ğŸ§ Quarta â€“ Jazz Rap Vibes (21h - 23h)</div>
      <div class="card">ğŸ§ Sexta â€“ Slow Jams Night (22h - 00h)</div>
      <div class="card">ğŸ§ SÃ¡bado â€“ Beat Apurado com DJ Jordan (21h - 23h)</div>
      <div class="card">ğŸ§ Domingo â€“ Samba & Rock Classics (18h - 20h)</div>
    </div>
  </section>

  <!-- PRODUTOS -->
  <section id="produtos">
    <h2>ğŸ›’ Produtos</h2>
    <p>Confira camisetas, bonÃ©s e vinis exclusivos do Beat Apurado:</p>
    <a href="https://www.mercadolivre.com.br" target="_blank" style="color:#39ff14;font-weight:bold;">ğŸ‘‰ Acesse nossa loja</a>
  </section>

  <!-- CHAT -->
  <section id="chat">
    <h2>ğŸ’¬ Chat IntergalÃ¡ctico</h2>
    <iframe class="chat-frame" src="https://tlk.io/beatapurado"></iframe>
  </section>

</div>

<footer>
  Â© 2025 Beat Apurado - DJ Jordan ğŸš€ Conectando galÃ¡xias pelo som
</footer>

<script>
// --- PLAYER ---
const btn = document.getElementById("playBtn");
const player = document.getElementById("radioPlayer");
const statusEl = document.getElementById("status");
let isPlaying = false;

// Tenta tocar o player
btn.addEventListener("click", () => {
  if (isPlaying) {
    player.pause();
    btn.textContent = "â–¶ï¸ Play";
    isPlaying = false;
  } else {
    player.play().then(() => {
      btn.textContent = "â¸ï¸ Pause";
      isPlaying = true;
    }).catch(err => {
      console.log("Erro ao iniciar Ã¡udio:", err);
      statusEl.textContent = "âŒ Falha no Ã¡udio (verifique o link)";
      statusEl.style.color = "#ff4444";
    });
  }
});

// --- STATUS ONLINE/OFFLINE ---
async function checkStream() {
  try {
    const response = await fetch(player.src, { method: 'HEAD', mode: 'no-cors' });
    statusEl.textContent = "ğŸŸ¢ Online";
    statusEl.style.color = "#39ff14";
  } catch {
    statusEl.textContent = "ğŸ”´ Offline";
    statusEl.style.color = "#ff4444";
  }
}
setInterval(checkStream, 10000);
checkStream();

// --- VISUALIZADOR DE ÃUDIO ---
const canvas = document.getElementById("visualizer");
const ctx = canvas.getContext("2d");
let audioCtx, analyser, source, dataArray;

function setupVisualizer() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  analyser = audioCtx.createAnalyser();
  source = audioCtx.createMediaElementSource(player);
  source.connect(analyser);
  analyser.connect(audioCtx.destination);
  analyser.fftSize = 256;
  const bufferLength = analyser.frequencyBinCount;
  dataArray = new Uint8Array(bufferLength);

  function draw() {
    requestAnimationFrame(draw);
    analyser.getByteFrequencyData(dataArray);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const barWidth = (canvas.width / bufferLength) * 2.5;
    let x = 0;
    for (let i = 0; i < bufferLength; i++) {
      const barHeight = dataArray[i] / 2;
      const r = 57;
      const g = 255;
      const b = 20 + (barHeight / 2);
      ctx.fillStyle = `rgb(${r},${g},${b})`;
      ctx.fillRect(x, canvas.height - barHeight, barWidth, barHeight);
      x += barWidth + 1;
    }
  }
  draw();
}

canvas.width = window.innerWidth * 0.8;
canvas.height = 100;
player.addEventListener("play", () => {
  if (!audioCtx) setupVisualizer();
});

// --- CONTADOR DE VISITAS ---
function updateVisitas() {
  let visitas = parseInt(localStorage.getItem('total_visitas')) || 0;
  if (!sessionStorage.getItem('visit_counted')) {
    visitas++;
    localStorage.setItem('total_visitas', visitas);
    sessionStorage.setItem('visit_counted', 'true');
  }
  document.getElementById("visitas").textContent = visitas;
}

// --- CONTADOR DE ONLINE ---
function updateOnline() {
  let sessionId = sessionStorage.getItem('session_id');
  if (!sessionId) {
    sessionId = Math.random().toString(36).substr(2, 9);
    sessionStorage.setItem('session_id', sessionId);
  }
  let onlineUsers = JSON.parse(localStorage.getItem('online_users')) || [];
  const currentTime = Date.now();
  onlineUsers = onlineUsers.filter(user => currentTime - user.timestamp < 30000);
  const currentUserIndex = onlineUsers.findIndex(user => user.id === sessionId);
  if (currentUserIndex > -1) {
    onlineUsers[currentUserIndex].timestamp = currentTime;
  } else {
    onlineUsers.push({ id: sessionId, timestamp: currentTime });
  }
  localStorage.setItem('online_users', JSON.stringify(onlineUsers));
  document.getElementById("online").textContent = onlineUsers.length;
}

updateVisitas();
updateOnline();
setInterval(updateOnline, 5000);
</script>

</body>
</html>
